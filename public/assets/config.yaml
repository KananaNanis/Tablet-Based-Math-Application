# this config tree assumes order, even for yaml hashes!
params:
  modify:
    expr_1: {left: 5, arg_spacing: 20, res_spacing: 30}
identity_function:
  params:
    generate: { arg_1_name: [uniform, .1, 1.7] }
    # generate: { arg_1_name: [fixed, .2] }
    create:
      bar_1: { name: [arg_1_name] }
      bar_3: { name: [arg_1_name] }
    modify:
      bar_1: 
        position: [100, 0]
      bar_3: 
        position: [460, 0]
    event_handling: 
      arg_1: bar_1
      correctness: near_height
      top_right_text: average_error
    misc: 
      config_iteration: 5
      num_stars: 3
      remove_on_exit: [err_box]
      blank_between_exercises: 500
      curr_op: identity
  as_option:
    params:
      generate: 
        option_skip_permute: true  # before seed!
        option_value_delta: 0.2
        option_value_seed: arg_1_name
        restriction_1: option > 0.05
        restriction_2: option < 1.7
      modify:
        bar_3: 
          position: [10, 0]
          misc: 
            is_option: true
            option_width: 95
            option_offset: 280
      event_handling:
        arg_1: bar_1
        result: bar_3
    bars:
      level_1:
        params:
          misc:
            jmp: [identity_function, as_drag, bars, level_1]
    doors:
      level_1:
        params:
          remap_ids:
            bar_1: door_1
            bar_3: door_3
          misc:
            jmp: [identity_function, as_drag, doors, level_1]
  as_drag:
    params:
      create:
        bar_3: { name: [1.8] }
      modify:
        bar_3:
          anim_info: { blink: .5 }
      event_handling: 
        move: stretch_bar
        comparison_source: bar_1
        target: bar_3
        correctness: full_height
        touch_reveals_button: submit
    bars:
      level_1:
        params:
          misc:
            jmp: [identity_function, as_option, doors, level_1]
    doors:
      level_1:
        params:
          remap_ids:
            bar_1: door_1
            bar_3: door_3
          modify:
            bar_3: 
              style: {opacity: 1}
              misc: 
                handle_opacity: 0
                mutable: true
          event_handling:
            result: door_3
            move: move_handle
intro_halves:
  params:
    generate: 
      # bar_1_name: [fixed, .5]
      bar_1_name: [uniform, .2, 1.1]
    create:
      door_3: [.5]
      bar_1: { name: bar_1_name }
    modify:
      door_3: 
        position: [35vw, 0]
        style:
        misc:
          frame_thickness: 0
          handle_thickness: 1
          handle_width: 300
          handle_opacity: 0
          handle_color: orange
      bar_1: 
        position: [40vw, 0]
        anim_info: { blink: .5 }
        style:
          borderRadius: 25
          width: 250
    event_handling: 
      move: move_handle
      comparison_source: bar_1
      target: door_3
      correctness: half_height
      touch_reveals_button: submit
    misc:
      config_iteration: 4
      # config_iteration: 1
      num_stars: 3
      remove_on_exit: [button_submit]
  level_1:
    params:
      misc:
        # jmp: jmp_label_1
        jmp: [add_or_half, as_option, result_option, half, bars, level_1]
add_or_half:
  params:
    generate: { arg_1_name: [uniform, .1, 1.6], 
                # arg_1_name: [fixed, .2],
                result_name: [uniform, .2, 1.7],
                # result_name: [fixed, .5],
                arg_2_name: result_name - arg_1_name,
                restriction_1: arg_2_name > .1,
                restriction_2: arg_2_name < 1.6 }
    create:
      big_paren: true
      big_op: +
      # bar_1: [.2]
      # bar_2: [.3]
      # bar_3: [.5]
      bar_1: { name: [arg_1_name] }
      bar_2: { name: [arg_2_name] }
      bar_3: { name: [result_name] }
    modify:
      big_paren:
        position: [20, 0]
        style: { width: 300 }
      big_op:
        position: [80, 0]
        style: {opacity: 1}
    event_handling: 
      correctness: near_height
      top_right_text: average_error
      arg_1: bar_1
      arg_2: bar_2
    misc: 
      config_iteration: 7
      num_stars: 3
      remove_on_exit: [err_box]
      blank_between_exercises: 500
      event_handling: { arg_2: bar_2 }
  as_option:
    params:
      generate: 
        # option_value_delta: [[.5], [.3], [.2], [.1]]
        option_skip_permute: true  # before seed!
        option_value_delta: 0.2
        restriction_3: option > 0
        restriction_4: option < 1.7
      modify:
        big_op:
          position: [80, 0]
        big_paren:
          style: { width: 570 }
        bar_1: 
          position: [10, 0]
        bar_3: 
          position: [580, 0]
    result_option:
      params:
        generate:
          option_value_seed: result_name
        modify:
          big_paren:
            style: { width: 270 }
          bar_2: 
            position: [195, 0]
          bar_3: 
            position: [10, 0]
            misc: 
              is_option: true
              option_width: 95
              option_offset: 280
      bars:
        level_1:
          params:
            misc:
              jmp: [add_or_half, as_drag, result_option, bars, level_1]
      doors:
        params:
          remap_ids:
            bar_1: door_1
            bar_2: door_2
            bar_3: door_3
        level_1:
          params:
            misc:
              jmp: [add_or_half, as_drag, result_option, doors, level_1]
      half:
        params:
          generate: { result_name: 0.5 * arg_1_name }
          create:
            big_op: '*'
            bar_2: remove
            five_frame_2: { name: .5 }
          modify:
            five_frame_2:
              position: [130, 0]
              style: { color: grey }
              misc:
                just_text: true
                extra_scale: .4
        bars:
          level_1:
            params:
              misc:
                jmp: [add_or_half, as_drag, result_option, half, bars, level_1]
        doors:
          params:
            remap_ids:
              bar_1: door_1
              bar_3: door_3
          level_1:
            params:
              misc:
                jmp: [add_or_half, as_drag, result_option, half, doors, level_1]
    arg_1_option:
      params:
        generate:
          option_value_delta: -0.2
          option_value_seed: arg_1_name
        modify:
          big_op:
            position: [380, 0]
          bar_1: 
            position: [10, 0]
            misc: 
              is_option: true
              option_width: 95
              option_offset: 0
          bar_2: 
            position: [495, 0]
      bars:
        level_1:
          params:
            misc:
              jmp: [add_or_half, as_drag, arg_1_option, bars, level_1]
      doors:
        params:
          remap_ids:
            bar_1: door_1
            bar_2: door_2
            bar_3: door_3
        level_1:
          params:
            misc:
              jmp: [add_or_half, as_drag, arg_1_option, doors, level_1]
      half:
        params:
          generate: { result_name: 0.5 * arg_1_name }
          create:
            big_op: '*'
            bar_2: remove
            five_frame_2: { name: .5 }
          modify:
            five_frame_2:
              position: [430, 0]
              style: { color: grey }
              misc:
                just_text: true
                extra_scale: .4
        bars:
          level_1:
            params:
              misc:
                jmp: [add_or_half, as_drag, arg_1_option, half, bars, level_1]
        doors:
          params:
            remap_ids:
              bar_1: door_1
              bar_3: door_3
          level_1:
            params:
              misc:
                jmp: [add_or_half, as_drag, arg_1_option, half, doors, level_1]
    arg_2_option:
      params:
        generate:
          option_value_seed: arg_2_name
        modify:
          bar_2: 
            position: [10, 0]
            misc: 
              is_option: true
              option_width: 95
              option_offset: 190
      bars:
        level_1:
          params:
            misc:
              jmp: [add_or_half, as_drag, arg_2_option, bars, level_1]
      doors:
        params:
          remap_ids:
            bar_1: door_1
            bar_2: door_2
            bar_3: door_3
        level_1:
          params:
            misc:
              jmp: [add_or_half, as_drag, arg_2_option, doors, level_1]
  as_drag:
    params:
      create:
        err_box:
      modify:
        bar_1: 
          position: [10, 0]
        bar_2: 
          position: [220, 0]
        bar_3: 
          position: [320, 0]
      event_handling: 
        arg_1: bar_1
        arg_2: bar_2
        result: bar_3
        touch_reveals_button: submit
        star_policy: loose
    result_option:
      params:
        modify:
          bar_3: 
            style: {opacity: 1}
            anim_info: { blink: 0 }
            misc: 
              mutable: true
        event_handling: 
          move: stretch_bar
          target: bar_3
      bars:
        params:
          create:
            # bar_2: { name: [0] }
            bar_3: { name: [1.8] }
        level_1:
          params:
            misc:
              jmp: [add_or_half, as_option, result_option, doors, level_1]
      doors:
        params:
          remap_ids:
            bar_1: door_1
            bar_2: door_2
            bar_3: door_3
          create:
            # bar_2: { name: [0] }
          modify:
            bar_3: 
              misc:
                handle_opacity: 0
          event_handling: 
            move: move_handle
        level_1:
          params:
            misc:
              jmp: [add_or_half, as_option, arg_2_option, bars, level_1]
          # params:
            # generate: { arg_2_name: [fixed, .5],
            #   result_name: arg_1_name + arg_2_name }
      half:
        params:
          generate: { result_name: 0.5 * arg_1_name }
          create:
            big_op: '*'
            bar_2: remove
            five_frame_2: { name: .5 }
          modify:
            five_frame_2:
              position: [150, 0]
              style: { color: grey }
              misc:
                just_text: true
                extra_scale: .4
          event_handling:
            arg_2: five_frame_2
        bars:
          level_1:
            params:
              create:
                bar_3: { name: [1.8] }
              misc:
                jmp: [add_or_half, as_option, result_option, half, doors, level_1]
        doors:
          params:
            remap_ids:
              bar_1: door_1
              bar_3: door_3
            modify:
              bar_3: 
                misc:
                  handle_opacity: 0
            event_handling: 
              move: move_handle
          level_1:
            params:
              misc:
                jmp: [add_or_half, as_option, arg_1_option, half, bars, level_1]
    arg_1_option:
      params:
        modify:
          bar_1: 
            style: {opacity: 1}
            anim_info: { blink: 0 }
            misc: 
              mutable: true
        event_handling: 
          move: stretch_bar
          target: bar_1
      bars:
        params:
          create:
            bar_1: { name: [1.8] }
        level_1:
          params:
            misc:
              jmp: [add_or_half, as_option, arg_1_option, doors, level_1]
      doors:
        params:
          remap_ids:
            bar_1: door_1
            bar_2: door_2
            bar_3: door_3
          create:
            # bar_2: { name: [0] }
          modify:
            bar_1: 
              misc:
                handle_opacity: 0
          event_handling: 
            move: move_handle
        level_1:
        all_done_adding:
          params:
            create:
              big_op: remove
              big_paren: remove
              bar_1: remove
              bar_2: remove
              bar_3: remove
              center_text:  That's all for today!
      half:
        params:
          generate: { result_name: 0.5 * arg_1_name }
          create:
            big_op: '*'
            bar_2: remove
            five_frame_2: { name: .5 }
          modify:
            five_frame_2:
              position: [150, 0]
              style: { color: grey }
              misc:
                just_text: true
                extra_scale: .4
          event_handling:
            arg_2: five_frame_2
        bars:
          level_1:
            params:
              create:
                bar_1: { name: [1.8] }
              misc:
                jmp: [add_or_half, as_option, arg_1_option, half, doors, level_1]
        doors:
          params:
            remap_ids:
              bar_1: door_1
              bar_3: door_3
            modify:
              bar_1: 
                misc:
                  handle_opacity: 0
            event_handling: 
              move: move_handle
          level_1:
            params:
              misc:
                jmp: [add_or_half, as_option, result_option, bars, level_1]
    arg_2_option:
      params:
        modify:
          bar_2: 
            style: {opacity: 1}
            anim_info: { blink: 0 }
            misc: 
              mutable: true
        event_handling: 
          move: stretch_bar
          target: bar_2
      bars:
        params:
          create:
            bar_2: { name: [1.8] }
        level_1:
          params:
            misc:
              jmp: [add_or_half, as_option, arg_2_option, doors, level_1]
      doors:
        params:
          remap_ids:
            bar_1: door_1
            bar_2: door_2
            bar_3: door_3
          create:
            # bar_2: { name: [0] }
          modify:
            bar_2: 
              misc:
                handle_opacity: 0
          event_handling: 
            move: move_handle
        level_1:
          params:
            misc:
              jmp: [add_or_half, as_option, arg_1_option, bars, level_1]
add_height:
  params:
    generate: { arg_1_name: [uniform, .1, 1.6], 
                # arg_1_name: [fixed, .2],
                result_name: [uniform, .2, 1.7],
                # result_name: [fixed, .5],
                arg_2_name: result_name - arg_1_name,
                restriction_1: arg_2_name > .1,
                restriction_2: arg_2_name < 1.6 }
    create:
      big_paren: true
      big_op: +
    modify:
      big_paren:
        position: [20, 0]
        style: { width: 300 }
      big_op:
        position: [80, 0]
        style: {opacity: 1}
    event_handling: 
      correctness: near_height
      top_right_text: average_error
    misc: 
      config_iteration: 2
      num_stars: 3
      remove_on_exit: [err_box]
      blank_between_exercises: 500
  bar_target:
    params:
      # generate: { restriction_2: arg_1_name < arg_2_name }
      create:
        # bar_1: [.2]
        # bar_2: [.3]
        # bar_3: [.5]
        bar_1: { name: [arg_1_name] }
        bar_2: { name: [arg_2_name] }
        bar_3: { name: [result_name] }
      modify:
        big_paren:
          style: { width: 570 }
        big_op:
          position: [380, 0]
        bar_1: 
          position: [10, 0]
        bar_2: 
          position: [495, 0]
        bar_3: 
          position: [580, 0]
      event_handling: { arg_2: bar_2 }
    arg1_option:
      params:
        generate: 
          # option_value_delta: [[.5], [.3], [.2], [.1]]
          option_skip_permute: true  # before seed!
          option_value_delta: -0.2
          option_value_seed: arg_1_name
          restriction_3: option > 0
          restriction_4: option < 1.7
        modify:
          bar_1: 
            position: [10, 0]
            misc: 
              is_option: true
              option_width: 95
              option_offset: 0
        event_handling:
          arg_1: bar_1
          arg_2: bar_2
      level_1:
    actual_addition:
      params:
        create:
          err_box:
        modify:
          bar_3: 
            style: {opacity: 1}
            misc: 
              mutable: true
        event_handling: 
          target: bar_3
          touch_reveals_button: submit
          star_policy: loose
      level_1:
        params:
      level_2:
  door_target:
    params:
      create:
        # door_1: { name: [arg_1_name] }
        # door_3: { name: [result_name] }
        door_1: [.2]
        door_3: [.5]
        # door_2: { name: [arg_2_name] }
        door_2: [.3]
      modify:
        door_1: 
          position: [10, 0]
        door_3: 
          position: [320, 0]
        door_2: 
          position: [220, 0]
      event_handling: 
        arg_1: door_1
        arg_2: door_2
        result: door_3
        move: move_handle
    actual_addition:
      params:
        create:
          err_box:
        modify:
          door_3: 
            style: {opacity: 1}
            anim_info: { blink: 0 }
            misc: 
              handle_opacity: 0
              mutable: true
        event_handling: 
          target: door_3
          touch_reveals_button: submit
          star_policy: loose
      level_1:
        params:
          generate: { arg_2_name: [fixed, .5],
            result_name: arg_1_name + arg_2_name }
      level_2:
pure_five_frame:
  params:
    generate: 
      prompt_value: [pick_from_range, 1, 5.5, 1]
      option_value_delta: [[1], [2], [3], [4], [5]]
      option_value_seed: prompt_value
      restriction_3: option > 0
      restriction_4: option < 6
    create:
      five_frame_1: { name: prompt_value }
      five_frame_2: { name: 1 }
      door_9: [10.0]  # as a reference
    modify:
      five_frame_1: 
        position: [20, 0]
        # this only works once, since it is looking for changes!
        # anim_info: { opacity: [1, 0], duration: 1000 }
        misc:
          extra_scale: .245
      five_frame_2:
        position: [0, 0]
        misc:
          is_option: true
          just_text: true
          extra_scale: .5
      door_9: 
        position: [10, 0]
        misc: {tickmarks: [.5, 1.5]}
    event_handling:
      correctness: identical
      target: five_frame_2
      arg_1: five_frame_1
      comparison_source: five_frame_1
    misc: 
      config_iteration: 5
      num_stars: 3
  level_1:
  disappearing:
    params:
      create:
        button_start:
      modify:
        five_frame_1:
          anim_info: null
          style: { opacity: 0 }
        five_frame_2:
          style: { opacity: 0 }
      misc:
        freeze_display: true
    level_2:
      params:
        delay:
          modify:
            five_frame_1:
              style: { opacity: 1 }
              anim_info:
                opacity: [1, 0]
                delay: 1000
                duration: 500
            five_frame_2:
              appear_after: 1500
    level_3:
      params:
        delay:
          modify:
            five_frame_1:
              style: { opacity: 1 }
              anim_info:
                opacity: [1, 0]
                delay: 250
                duration: 250
            five_frame_2:
              appear_after: 500
    level_4:
      params:
        misc:
          jmp: ['intro_names', 'copy_tower', 'level_1']
        delay:
          modify:
            five_frame_1:
              style: { opacity: 1 }
              anim_info: { opacity: [1, 0], delay: 0, duration: 250 }
            five_frame_2:
              appear_after: 250
    all_done:
      skip_node_above:
      params:
        create:
          five_frame_1: remove
          five_frame_2: remove
          button_start: remove
          center_text:  That's all for today!
intro_diagrams:
  params:
    create:
      keypad_kind: 'buildTower'
      tower_2: []
      button_submit:
    event_handling: { target: tower_2 }
    modify:
      tower_2: { position: [65vw, 0] }
    misc: 
      config_iteration: 4
      # config_iteration: 1
      num_stars: 3
  copy_tower:
    params:
      generate: { tower_1_name: [pick_from_range, .1, 1.8, .1] }
      # generate: { tower_1_name: [fixed, .8] }
      create:
        tower_1: { name: tower_1_name }
        button_submit: remove
        keypad_kind: remove  # new approach does not use keypad
      modify:
        tower_1: 
          position: [5, 0]
          # width: 60vw
          # overflow: 'hidden'
          misc:
            hide_tower_name: true
            # top_just_outline: true
        tower_2: 
          misc:
            hide_tower_name: true
      event_handling: 
        comparison_source: tower_1
        target: tower_2
        correctness: identical
    level_1:
      params:
        generate:
          option_value_delta: 0.2
          option_value_seed: tower_1_name
          restriction_3: option > 0
          restriction_4: option < 1.9
        create:
          tower_2: [1.1]
        modify:
          tower_2:
            position: [0, 0]
            misc: 
              is_option: true
        event_handling:
          arg_1: tower_1
    level_2:
      params:
        event_handling:
          touch_reveals_button: [submit, delete]
          create_tower_by_height: true
        misc:
          remove_on_exit: [button_submit, button_delete]
    level_3:
      params:
        generate:
          option_value_delta: 0.2
          option_value_seed: tower_1_name
          restriction_3: option > 0
          restriction_4: option < 1.9
        modify:
          tower_1:
            misc: 
              as_diagram: true
          tower_2:
            position: [0, 0]
            misc: 
              is_option: true
              as_diagram: true
        event_handling:
          arg_1: tower_1
    level_4:
      params:
        modify:
          tower_1:
            misc: 
              as_diagram: true
          tower_2:
            misc: 
              as_diagram: true
        event_handling:
          touch_reveals_button: [submit, delete]
          create_tower_by_height: true
        misc:
          remove_on_exit: [button_submit, button_delete]
    level_5:
      params:
        generate:
          option_value_delta: 0.2
          option_value_seed: tower_1_name
          restriction_3: option > 0
          restriction_4: option < 1.9
        modify:
          tower_2:
            position: [0, 0]
        event_handling:
          arg_1: tower_1
      level_5a:
        params:
          modify:
            tower_1:
              misc: 
                as_diagram: true
            tower_2:
              misc: 
                is_option: true
      level_5b:
        params:
          modify:
            tower_2:
              misc: 
                is_option: true
                as_diagram: true
    all_done:
      skip_node_above:
      params:
        create:
          tower_1: remove
          tower_2: remove
          center_text:  That's all for today!
intro_names:
  params:
    create:
      keypad_kind: 'buildTower'
      tower_2: []
      button_submit:
    event_handling: { target: tower_2 }
    modify:
      tower_2: 
        position: [65vw, 0]
        misc:
          tower_name_style: { left: 5 }
    misc: 
      config_iteration: 4
      # config_iteration: 1
      num_stars: 3
  copy_tower:
    params:
      generate: { tower_1_name: [pick_from_range, .1, 1.8, .1] }
      # generate: { tower_1_name: [fixed, .8] }
      create:
        tower_1: { name: tower_1_name }
        button_submit: remove
        keypad_kind: remove  # new approach does not use keypad
      modify:
        tower_1: 
          position: [5, 0]
          tower_style: {opacity: 0}
          # width: 60vw
          # overflow: 'hidden'
          # misc:
            # hide_tower_name: true
            # top_just_outline: true
        tower_2: 
          tower_style: {opacity: 0}
          # misc:
            # hide_tower_name: true
      event_handling: 
        comparison_source: tower_1
        target: tower_2
        correctness: identical
    level_1:
      params:
        generate:
          option_value_delta: 0.2
          option_value_seed: tower_1_name
          restriction_3: option > 0
          restriction_4: option < 1.9
        modify:
          tower_2:
            position: [0, 0]
            misc: 
              is_option: true
        event_handling:
          arg_1: tower_1
    all_done1:
      skip_node_above:
      params:
        create:
          tower_1: remove
          tower_2: remove
          center_text:  That's all for today!
    level_2:
      params:
        # generate: { tower_1_name: [fixed, 1.6] }
        create:
          keypad_kind: 'buildTower'
        event_handling:
          touch_reveals_button: [submit, delete]
        misc:
          remove_on_exit: [button_submit, button_delete]
    level_3:
      params:
        generate:
          option_value_delta: 0.2
          option_value_seed: tower_1_name
          restriction_3: option > 0
          restriction_4: option < 1.9
        modify:
          tower_2:
            position: [0, 0]
            tower_style: {opacity: null}
            misc: 
              is_option: true
              hide_tower_name: true
              # as_diagram: true
        event_handling:
          arg_1: tower_1
      level_3a:
      level_3b:
        params:
          modify:
            tower_1:
              tower_style: {opacity: null}
              misc: 
                hide_tower_name: true
            tower_2:
              tower_style: {opacity: 0}
              misc: 
                hide_tower_name: null
    level_4:
      params:
        create:
          keypad_kind: 'buildTower'
        modify:
          tower_1:
            tower_style: {opacity: null}
            misc: 
              hide_tower_name: true
          tower_2: 
            position: [right 100, 0]
        event_handling:
          touch_reveals_button: [submit, delete]
        misc:
          remove_on_exit: [button_submit, button_delete]
    level_5:
      params:
        modify:
          tower_2:
            tower_style: {opacity: null}
            misc: 
              hide_tower_name: true
        event_handling:
          touch_reveals_button: [submit, delete]
          create_tower_by_height: true
        misc:
          remove_on_exit: [button_submit, button_delete]
    level_6:
      params:
        generate:
          option_value_delta: 0.2
          option_value_seed: tower_1_name
          restriction_3: option > 0
          restriction_4: option < 1.9
        modify:
          tower_2:
            position: [0, 0]
            tower_style: {opacity: null}
            misc: 
              is_option: true
              hide_tower_name: true
              as_diagram: true
        event_handling:
          arg_1: tower_1
      level_6a:
      level_6b:
        params:
          modify:
            tower_1:
              tower_style: {opacity: null}
              misc: 
                hide_tower_name: true
                as_diagram: true
            tower_2:
              tower_style: {opacity: 0}
              misc: 
                hide_tower_name: null
    level_7:
      params:
        create:
          keypad_kind: 'buildTower'
        modify:
          tower_1:
            tower_style: {opacity: null}
            misc: 
              hide_tower_name: true
              as_diagram: true
        event_handling:
          touch_reveals_button: [submit, delete]
        misc:
          remove_on_exit: [button_submit, button_delete]
    level_8:
      params:
        modify:
          tower_2:
            tower_style: {opacity: null}
            misc: 
              hide_tower_name: true
              as_diagram: true
        event_handling:
          touch_reveals_button: [submit, delete]
          create_tower_by_height: true
        misc:
          remove_on_exit: [button_submit, button_delete]
    all_done:
      params:
        create:
          tower_1: remove
          tower_2: remove
          center_text:  That's all for today!
one_through_five:
  params:
    generate: 
      prompt_value: [pick_from_range, .1, .55, .1]
      option_value_delta: [[.1], [.2], [.3], [.4], [.5]]
      option_value_seed: prompt_value
      restriction_3: option > 0
      restriction_4: option < 1.9
    create:
      tower_2: []
    modify:
      tower_2: 
        position: [0, 0]
        tower_style: { opacity: 0 }
        misc:
          is_option: true
          tower_name_style: { left: 5 }
    event_handling:
      target: tower_2
      correctness: identical
    misc: 
      config_iteration: 7
      # config_iteration: 2
      # config_iteration: 1
      num_stars: 3
  pegs:
    params:
      generate: 
        peg_type: [pick_from_list, ['a', 'b', 'c']]
        peg_name: as_peg_name peg_type prompt_value
        option_value_delta: [[.1], [.2], [.3], [.4], [.5]]
        restriction_4: option < .6
        prompt_value_10: 10 * prompt_value
      create:
        tile_1: { name: peg_name }
        door_9: [10.0]  # as a reference
      modify:
        tile_1: 
          position: [20, 0]
          style: { borderTopWidth: 0 }
        door_9: 
          position: [10, 0]
          misc: {tickmarks: [.5, 1.5]}
      event_handling: 
        arg_1: tile_1
        comparison_source: tile_1
    pegs_with_five_frames:
      params:
        create:
          five_frame_3: { name: 0 }
        modify:
          five_frame_3:
            position: [20, 0]
            style: {opacity: 0.2}
            misc:
              extra_scale: .245
        misc:
          config_iteration: 5
      level_1:
      disappearing:
        params:
          create:
            button_start:
          modify:
            five_frame_3:
              style: { opacity: 0 }
            tile_1:
              style: { opacity: 0 }
            tower_2:
              style: { opacity: 0 }
          misc:
            freeze_display: true
        level_2:
          params:
            delay:
              modify:
                tile_1:
                  style: { opacity: 1 }
                five_frame_3:
                  style: { opacity: 0.1 }
                  anim_info:
                    opacity: [0.1, 0]
                    delay: 1000
                    duration: 1500
                tower_2:
                  style: { opacity: 1 }
        level_3:
          params:
            delay:
              modify:
                tile_1:
                  style: { opacity: 1 }
                five_frame_3:
                  style: { opacity: 0.1 }
                  anim_info:
                    opacity: [0.1, 0]
                    delay: 1000
                    duration: 500
                tower_2:
                  style: { opacity: 1 }
        level_4:
          params:
            delay:
              modify:
                tile_1:
                  style: { opacity: 1 }
                five_frame_3:
                  style: { opacity: 0.1 }
                  anim_info:
                    opacity: [0.1, 0]
                    delay: 500
                    duration: 250
                tower_2:
                  style: { opacity: 1 }
        level_5:
          params:
            delay:
              modify:
                tile_1:
                  style: { opacity: 1 }
                five_frame_3:
                  style: { opacity: 0.1 }
                  anim_info:
                    opacity: [0.1, 0]
                    duration: 250
                tower_2:
                  style: { opacity: 1 }
    level_2:
    disappearing:
      params:
        create:
          button_start:
        modify:
          tile_1:
            style: { opacity: 0 }
          tower_2:
            style: { opacity: 0 }
        misc:
          freeze_display: true
      level_3:
        params:
          delay:
            modify:
              tile_1:
                style: { opacity: 1 }
                anim_info:
                  opacity: [1, 0]
                  delay: 1000
                  duration: 500
              tower_2:
                appear_after: 1500
      level_4:
        params:
          delay:
            modify:
              tile_1:
                style: { opacity: 1 }
                anim_info:
                  opacity: [1, 0]
                  delay: 250
                  duration: 250
              tower_2:
                appear_after: 500
      level_5:
        params:
          delay:
            modify:
              tile_1:
                style: { opacity: 1 }
                anim_info:
                  opacity: [1, 0]
                  delay: 100
                  duration: 150
              tower_2:
                appear_after: 250
      all_done:
        skip_node_above:
        params:
          create:
            tile_1: remove
            tower_2: remove
            button_start: remove
            center_text:  That's all for today!
  doors:
    params:
      generate: 
        restriction_4: option < .6
      create:
        door_1: { name: [prompt_value] }
      modify:
        door_1: 
          position: [10, 0]
          misc: {tickmarks: [.5, 1.5]}
      event_handling: 
        arg_1: door_1
        comparison_source: door_1
    level_1:
      params:
        generate:
          peg_type: [pick_from_list, ['a', 'b', 'c']]
          peg_name: as_peg_name peg_type prompt_value
        create:
          tile_3: { name: peg_name }
        modify:
          tile_3:
            position: [20, 0]
            style: {opacity: 0.3}
        misc:
          config_iteration: 5
    level_2:
    disappearing:
      params:
        create:
          button_start:
        modify:
          door_1:
            style: { opacity: 0 }
          tower_2:
            style: { opacity: 0 }
        misc:
          freeze_display: true
      level_3:
        params:
          delay:
            modify:
              door_1:
                style: { opacity: 1 }
                anim_info:
                  opacity: [1, 0]
                  delay: 1000
                  duration: 500
              tower_2:
                appear_after: 1500
      level_4:
        params:
          delay:
            modify:
              door_1:
                style: { opacity: 1 }
                anim_info:
                  opacity: [1, 0]
                  delay: 250
                  duration: 250
              tower_2:
                appear_after: 500
      level_5:
        params:
          delay:
            modify:
              door_1:
                style: { opacity: 1 }
                anim_info:
                  opacity: [1, 0]
                  delay: 100
                  duration: 150
              tower_2:
                appear_after: 250
      all_done:
        skip_node_above:
        params:
          create:
            door_1: remove
            tower_2: remove
            button_start: remove
            center_text:  That's all for today!
estimate_names_1_to_5:
  params:
    create:
      keypad_kind: 'buildTower'
      tower_2: []
    event_handling: 
      target: tower_2
      touch_reveals_button: [submit, delete]
    modify:
      tower_2: 
        position: [65vw, 0]
        tower_style: {opacity: 0}
    misc: 
      config_iteration: 7
      # config_iteration: 2
      # config_iteration: 1
      num_stars: 3
      remove_on_exit: [button_submit, button_delete]
  of_doors:
    params:
      # generate: { door_1_name: [pick_from_range, .1, 1.8, .1] }
      create:
        door_1: { name: [door_1_name] }
      modify:
        door_1: 
          position: [10, 0]
          misc: {tickmarks: [.5, 1.5]}
      event_handling: 
        comparison_source: door_1
        # correctness: identical
        correctness: same_height
    level_1:
      params:
        generate: 
          door_1_name: [pick_from_list, [.1, .2, .3, .4, .5]]
          # door_1_name: [fixed, .5]
        modify:
          tower_2: 
            tower_style: {opacity: 0}
six_through_nine:
  params:
    generate: 
      prompt_value: [pick_from_range, .6, .95, .1]
      option_value_delta: [[.6], [.7], [.8], [.9]]
      option_value_seed: prompt_value
      restriction_3: option > 0
      restriction_4: option < 1.9
    create:
      tower_2: []
    modify:
      tower_2: 
        position: [0, 0]
        tower_style: { opacity: 0 }
        misc:
          is_option: true
          tower_name_style: { left: 5 }
    event_handling:
      target: tower_2
      correctness: identical
    misc: 
      config_iteration: 7
      # config_iteration: 2
      # config_iteration: 1
      num_stars: 3
  intro:
    params:
      create:
        tower_2: remove
        tower_1: { name: prompt_value }
        door_2: [0]
      modify:
        tower_1:
          position: [10, 0]
          tower_style: { opacity: 0 }
        door_2:
          position: [0, 0]
          misc:
            tickmarks: [.5, 1.5]
            is_option: true
      event_handling:
        arg_1: tower_1
        target: door_2
      misc: 
        config_iteration: 5
  doors:
    params:
      create:
        door_1: { name: [prompt_value] }
      modify:
        door_1: 
          position: [10, 0]
          misc: {tickmarks: [.5, 1.5]}
      event_handling: 
        arg_1: door_1
        comparison_source: door_1
    level_1:
      params:
        create:
          tower_3: { name: prompt_value }
        modify:
          door_1: 
            misc: 
              handle_opacity: 0
          tower_3:
            position: [20, 0]
            misc:
              hide_tower_name: true
        misc:
          config_iteration: 5
    level_2:
      params:
        create:
          tower_3: { name: prompt_value }
        modify:
          tower_3:
            position: [20, 0]
            style: {opacity: 0.3}
            misc:
              hide_tower_name: true
        misc:
          config_iteration: 5
    level_3:
    disappearing:
      params:
        create:
          button_start:
        modify:
          door_1:
            style: { opacity: 0 }
          tower_2:
            style: { opacity: 0 }
        misc:
          freeze_display: true
      level_4:
        params:
          delay:
            modify:
              door_1:
                style: { opacity: 1 }
                anim_info:
                  opacity: [1, 0]
                  delay: 1000
                  duration: 1500
              tower_2:
                appear_after: 2500
      level_5:
        params:
          delay:
            modify:
              door_1:
                style: { opacity: 1 }
                anim_info:
                  opacity: [1, 0]
                  delay: 1000
                  duration: 500
              tower_2:
                appear_after: 1500
      level_6:
        params:
          delay:
            modify:
              door_1:
                style: { opacity: 1 }
                anim_info:
                  opacity: [1, 0]
                  delay: 250
                  duration: 250
              tower_2:
                appear_after: 500
      level_7:
        params:
          delay:
            modify:
              door_1:
                style: { opacity: 1 }
                anim_info:
                  opacity: [1, 0]
                  delay: 100
                  duration: 150
              tower_2:
                appear_after: 250
estimate_names_6_to_9:
  params:
    create:
      keypad_kind: 'buildTower'
      tower_2: []
    event_handling: 
      target: tower_2
      touch_reveals_button: [submit, delete]
    modify:
      tower_2: 
        position: [65vw, 0]
        tower_style: {opacity: 0}
    misc: 
      config_iteration: 7
      # config_iteration: 2
      # config_iteration: 1
      num_stars: 3
      remove_on_exit: [button_submit, button_delete]
  of_doors:
    params:
      # generate: { door_1_name: [pick_from_range, .1, 1.8, .1] }
      create:
        door_1: { name: [door_1_name] }
      modify:
        door_1: 
          position: [10, 0]
          misc: {tickmarks: [.5, 1.5]}
      event_handling: 
        comparison_source: door_1
        # correctness: identical
        correctness: same_height
    level_1:
      params:
        generate: 
          door_1_name: [pick_from_list, [.6, .7, .8, .9]]
        modify:
          tower_2: 
            tower_style: {opacity: 0}
eleven_through_fourteen:
  params:
    generate: 
      prompt_value: [pick_from_range, 1.1, 1.45, .1]
      option_value_delta: [[1.1], [1.2], [1.3], [1.4]]
      option_value_seed: prompt_value
      restriction_3: option > 0
      restriction_4: option < 1.9
    create:
      tower_2: []
    modify:
      tower_2: 
        position: [0, 0]
        tower_style: { opacity: 0 }
        misc:
          is_option: true
          tower_name_style: { left: 5 }
    event_handling:
      target: tower_2
      correctness: identical
    misc: 
      config_iteration: 7
      # config_iteration: 2
      # config_iteration: 1
      num_stars: 3
  intro:
    params:
      create:
        tower_2: remove
        tower_1: { name: prompt_value }
        door_2: [0]
      modify:
        tower_1:
          position: [10, 0]
          tower_style: { opacity: 0 }
        door_2:
          position: [0, 0]
          misc:
            tickmarks: [.5, 1.5]
            is_option: true
      event_handling:
        arg_1: tower_1
        target: door_2
      misc: 
        config_iteration: 5
  doors:
    params:
      create:
        door_1: { name: [prompt_value] }
      modify:
        door_1: 
          position: [10, 0]
          misc: {tickmarks: [.5, 1.5]}
      event_handling: 
        arg_1: door_1
        comparison_source: door_1
    level_1:
      params:
        create:
          tower_3: { name: prompt_value }
        modify:
          door_1: 
            misc: 
              handle_opacity: 0
          tower_3:
            position: [20, 0]
            misc:
              hide_tower_name: true
        misc:
          config_iteration: 5
    level_2:
      params:
        create:
          tower_3: { name: prompt_value }
        modify:
          tower_3:
            position: [20, 0]
            style: {opacity: 0.3}
            misc:
              hide_tower_name: true
        misc:
          config_iteration: 5
    level_3:
    disappearing:
      params:
        create:
          button_start:
        modify:
          door_1:
            style: { opacity: 0 }
          tower_2:
            style: { opacity: 0 }
        misc:
          freeze_display: true
      level_4:
        params:
          delay:
            modify:
              door_1:
                style: { opacity: 1 }
                anim_info:
                  opacity: [1, 0]
                  delay: 1000
                  duration: 500
              tower_2:
                appear_after: 1500
      level_5:
        params:
          delay:
            modify:
              door_1:
                style: { opacity: 1 }
                anim_info:
                  opacity: [1, 0]
                  delay: 250
                  duration: 250
              tower_2:
                appear_after: 500
      level_6:
        params:
          delay:
            modify:
              door_1:
                style: { opacity: 1 }
                anim_info:
                  opacity: [1, 0]
                  delay: 100
                  duration: 150
              tower_2:
                appear_after: 250
estimate_names_11_to_14:
  params:
    create:
      keypad_kind: 'buildTower'
      tower_2: []
    event_handling: 
      target: tower_2
      touch_reveals_button: [submit, delete]
    modify:
      tower_2: 
        position: [65vw, 0]
        tower_style: {opacity: 0}
    misc: 
      config_iteration: 7
      # config_iteration: 2
      # config_iteration: 1
      num_stars: 3
      remove_on_exit: [button_submit, button_delete]
  of_doors:
    params:
      # generate: { door_1_name: [pick_from_range, .1, 1.8, .1] }
      create:
        door_1: { name: [door_1_name] }
      modify:
        door_1: 
          position: [10, 0]
          misc: {tickmarks: [.5, 1.5]}
      event_handling: 
        comparison_source: door_1
        # correctness: identical
        correctness: same_height
    level_1:
      params:
        generate: 
          door_1_name: [pick_from_list, [1.1, 1.2, 1.3, 1.4]]
        modify:
          tower_2: 
            tower_style: {opacity: 0}
        misc:
          jmp: ['estimate_names', 'of_doors', 'level_1']
    all_done:
      params:
        create:
          keypad_kind: remove
          door_1: remove
          tower_2: remove
          center_text:  That's all for today!
estimate_tower_height:
  params:
    generate: 
      # tower_1_name: [pick_from_range, .1, 1.8, .1]
      # tower_1_name: [pick_from_range, .1, .8, .1]
      tower_1_name: 
        exercise0: [fixed, [1]]
        exercise1: [fixed, [.5]]
        exercise2: [fixed, [.1]]
        exercise3: [fixed, [.5, .1]]
    create:
      tower_1: { name: tower_1_name }
      door_3: [0]
    modify:
      tower_1: 
        position: [5, 0]
        width: 60vw
        overflow: 'hidden'
        tower_style: { opacity: 0 }
      door_3: 
        position: [right 80, 0]
        anim_info: { blink: 0 }
        misc:
          handle_opacity: 0
    event_handling: 
      move: move_handle
      comparison_source: tower_1
      target: door_3
      correctness: near_discrete_height
      touch_reveals_button: submit
    misc:
      config_iteration: 4
      # config_iteration: 1
      num_stars: 3
      remove_on_exit: [button_submit]
  level_1:
    params:
      modify:
        tower_1:
          tower_style:
            opacity: 0.1
  level_2:
  level_3:
    params:
      generate:
        tower_1_name: 
          exercise0: [fixed, [.5]]
          exercise1: [fixed, [.5, .4]]
          exercise2: [fixed, [1, .1]]
          exercise3: [fixed, [1, .5]]
  level_4:
    skip_node_above:
    params:
      generate:
        tower_1_name: 
          exercise0: [fixed, [1]]
          exercise1: [fixed, [.5, .5]]
          exercise2: [fixed, [1, .5]]
          exercise3: [fixed, [.5, .5, .5]]
  level_5:
    skip_node_above:
    params:
      generate:
        tower_1_name: 
          exercise0: [fixed, [.5]]
          exercise1: [fixed, [.2, .3]]
          exercise2: [fixed, [.5, .5]]
          exercise3: [fixed, [.5, .2, .3]]
  level_6:
    params:
      generate:
        tower_1_name: [pick_from_range, .1, 1.8, .1]
  level_7:
    params:
      generate:
        tower_1_name: [pick_from_range, .1, 1.8, .1]
estimate_names:
  params:
    create:
      keypad_kind: 'buildTower'
      tower_2: []
    event_handling: 
      target: tower_2
      touch_reveals_button: [submit, delete]
    modify:
      tower_2: 
        position: [65vw, 0]
        tower_style: {opacity: 0}
    misc: 
      config_iteration: 7
      # config_iteration: 1
      num_stars: 3
      remove_on_exit: [button_submit, button_delete]
  of_animals:
    params:
      create:
        tile_1: { name: tile_1_name }
        door_9: [10.0]  # as a reference
      modify:
        tile_1: 
          position: [right 40vw, 0]
          # anim_info:   # EXAMPLES OF USING ANIMATION
          #   duration: [2000, 1000, 500, 250]
          #   # duration: 2000
          #   # loop: true
          #   bottom: [0, 200]
          #   opacity: [.5, 1]
        door_9: 
          position: [right 39vw, 0]
          misc: {tickmarks: [.5, 1.5]}
      event_handling: 
        comparison_source: tile_1
        # correctness: identical
        correctness: same_height
    level_1:
      params:
        generate: 
          # tile_1_value: [pick_from_range, .1, 1.8, .1]
          tile_1_value: [pick_from_list, [.1, .9, 1.0, 1.1]]
          tile_1_name: as_animal_name tile_1_value
        modify:
          tower_2: 
            tower_style: {opacity: 0.1}
    level_2:
      params:
        generate: 
          tile_1_value: [pick_from_list, [.1, .9, 1.0, 1.1]]
          tile_1_name: as_animal_name tile_1_value
    level_3:
      params:
        generate: 
          tile_1_value: [pick_from_list, [.2, .5, .8, 1.2]]
          tile_1_name: as_animal_name tile_1_value
    level_4:
      params:
        generate: 
          tile_1_value: [pick_from_list, [.3, .4, .6, .7]]
          tile_1_name: as_animal_name tile_1_value
    level_5:
      params:
        generate: 
          tile_1_value: [pick_from_list, [1.5, 1.6, 1.7, 1.8]]
          tile_1_name: as_animal_name tile_1_value
        modify:
          tower_2: 
            tower_style: {opacity: 0.1}
    level_6:
      params:
        generate: 
          tile_1_value: [pick_from_list, [1.5, 1.6, 1.7, 1.8]]
          tile_1_name: as_animal_name tile_1_value
    level_7:
      params:
        generate: 
          tile_1_value: [pick_from_list, [1.5, 1.4, 1.3, 1.2]]
          tile_1_name: as_animal_name tile_1_value
  of_doors:
    params:
      # generate: { door_1_name: [pick_from_range, .1, 1.8, .1] }
      create:
        door_1: { name: [door_1_name] }
      modify:
        door_1: 
          position: [10, 0]
          misc: {tickmarks: [.5, 1.5]}
      event_handling: 
        comparison_source: door_1
        # correctness: identical
        correctness: same_height
    level_1:
      params:
        generate: 
          door_1_name: [pick_from_list, [.1, .9, 1.0, 1.1]]
          # door_1_name: [fixed, .5]
        modify:
          tower_2: 
            tower_style: {opacity: 0.1}
    level_2:
      params:
        generate: 
          door_1_name: [pick_from_list, [.1, .9, 1.0, 1.1]]
    level_3:
      params:
        generate: 
          door_1_name: [pick_from_list, [.2, .5, .8, 1.2]]
    level_4:
      params:
        generate: 
          door_1_name: [pick_from_list, [.3, .4, .6, .7]]
    level_5:
      params:
        generate: 
          door_1_name: [pick_from_list, [1.5, 1.6, 1.7, 1.8]]
        modify:
          tower_2: 
            tower_style: {opacity: 0.1}
    level_6:
      params:
        generate: 
          door_1_name: [pick_from_list, [1.5, 1.6, 1.7, 1.8]]
    level_7:
      params:
        generate: 
          door_1_name: [pick_from_list, [1.5, 1.4, 1.3, 1.2]]
    all_values:
      params:
        generate: 
          door_1_name: [pick_from_range, .1, 1.8, .1]
      level_8:
      level_9:
      level_10:
        params:
          misc:
            jmp_no_suffix: [one_through_five, doors, level_1]
            # skip_suffix_for_this_level: true
            suffix_path: [suffix1]
  all_done:
    params:
      create:
        tower_2: remove
        center_text:  That's all for today!
measure_height:
  params:
    create:
      tower_2: []
    modify:
      tower_2: { position: [65vw, 0] }
    event_handling:
      target: tower_2
      touch_reveals_button: [submit, delete]
    misc: 
      remove_on_exit: [button_submit, button_delete]
      config_iteration: 7
      # config_iteration: 1
      num_stars: 3
  animal_height:
    params:
      generate: { tile_1_name: [pick_animal_name] }
      create:
        tile_1: { name: tile_1_name }
      modify:
        tile_1: { position: [right 40vw, 0] }
      event_handling: 
        comparison_source: tile_1
        correctness: approx_height
    level_1:
      params:
        event_handling:
          create_tower_by_height: true
    level_2:
      params:
        modify:
          tower_2:
            misc: 
              hide_tower_name: true
              as_diagram: true
        event_handling:
          create_tower_by_height: true
    level_3:
      params:
        create:
          keypad_kind: 'buildTower'
        modify:
          tower_2:
            tower_style: { opacity: 0 }
  to_handle:
    params:
      generate: { door_1_name: [pick_from_range, .1, 1.8, .1] }
      create:
        door_1: { name: [door_1_name] }
      modify:
        door_1: { position: [right 60vw, 0] }
      event_handling: { comparison_source: door_1, correctness: same_height }
    level_1:
      params:
        event_handling:
          create_tower_by_height: true
    level_2:
      params:
        modify:
          tower_2:
            misc: 
              hide_tower_name: true
              as_diagram: true
        event_handling:
          create_tower_by_height: true
    level_3:
      params:
        create:
          keypad_kind: 'buildTower'
        modify:
          tower_2:
            tower_style: { opacity: 0 }
  copy_tower_subitize:
    params:
      generate: { tower_1_name: [pick_from_range, .1, 1.8, .1] }
      create:
        tower_1: { name: tower_1_name }
        keypad_kind: 'buildTower'
      modify:
        tower_1: 
          position: [5, 0]
          width: 60vw
          overflow: 'hidden'
          misc:
            hide_tower_name: true
        tower_2:
          tower_style: { opacity: 0 }
      event_handling: { comparison_source: tower_1, correctness: identical }
    level_1:
    disappearing:
      params:
        create:
          button_start:
        modify:
          tower_1: 
            style: { opacity: 0 }  
        misc:
          freeze_display: true
      level_2:
        params:
          delay:
            modify:
              tower_1:
                style: { opacity: 1 }
                anim_info:
                  opacity: [1, 0]
                  delay: 1000
                  duration: 500
      level_3:
        params:
          delay:
            modify:
              tower_1:
                style: { opacity: 1 }
                anim_info:
                  opacity: [1, 0]
                  delay: 250
                  duration: 250
      level_4:
        params:
          delay:
            modify:
              tower_1:
                style: { opacity: 1 }
                anim_info:
                  opacity: [1, 0]
                  delay: 100
                  duration: 150
  animal_height_subitize:
    params:
      generate: { tile_1_name: [pick_animal_name] }
      create:
        tile_1: { name: tile_1_name }
        button_submit: remove
        button_start:
        keypad_kind: 'buildTower'
      modify:
        tile_1: 
          position: [right 40vw, 0]
          # appear_after: 2000
          style: { borderTopWidth: 0, opacity: 0 }
          # style: { borderTopWidth: 0 }
        tower_2:
          tower_style: { opacity: 0 }
      event_handling: 
        comparison_source: tile_1
        correctness: approx_height
        touch_reveals_button: submit
      misc:
        remove_on_exit: [button_submit]
        freeze_display: true
        jmp: [measure_height,  animal_height, level_1] 
      delay:
        modify:
          tile_1:
            style: { opacity: 1 }
            anim_info:
              opacity: [1, 0]
              duration: 1000
  all_done:
    params:
      create:
        tower_2: remove
        center_text:  That's all for today!
animal_sum:
  params:
    generate: 
      tile_1_name: [pick_animal_name]
      # tile_1_name: [fixed, kitty]
      tile_1_height: height_from_animal tile_1_name
      tile_2_name: [pick_animal_name]
      # tile_2_name: [fixed, puppy]
      tile_2_height: height_from_animal tile_2_name
      door_3_name: tile_1_height + tile_2_height
      restriction_1: door_3_name < 1.1
    create:
      tile_2: { name: tile_2_name }
      tile_1: { name: tile_1_name }
      door_3: { name: [door_3_name] }
    modify:
      tile_1: { position: [right 405, 0] }
      tile_2: { position: [right 200, 0] }
      door_3: 
        position: [right 80, 0]
        anim_info: { blink: 0 }
        misc:
          handle_opacity: 0
    event_handling: 
      move: move_handle
      arg_1: tile_1
      arg_2: tile_2
      target: door_3
      correctness: near_discrete_height
      touch_reveals_button: submit
    misc:
      config_iteration: 4
      num_stars: 3
      remove_on_exit: [button_submit]
  level_1:
  level_2:
  level_3:
two_animals:
  params:
    generate: 
      tile_1_name: [pick_from_list, [unicorn, dragon, sloth]]
      # tile_1_name: { exercise0: [pick_from_list, [unicorn]] }
      # tile_1_name: [fixed, sloth]
      tile_1_height: height_from_animal tile_1_name
      tile_2_scale: [uniform, .2, .5]
      tile_2_height: tile_2_scale * tile_1_height
      landmark_index: [pick_from_range, 0, 7]
      # landmark_index: [fixed, 1]
    create:
      tile_2: { name: tile_1_name }
      tile_1: { name: tile_1_name }
      button_start:
    modify:
      tile_1: 
        position: [right_from_left 60vw, 0]
        misc:
          landmark_index: landmark_index
      tile_2: 
        position: [right 50, 0]
        misc:
          # extra_dot: [100, 100]
          extra_scale: tile_2_scale
    event_handling: 
      correctness: move_dot
      arg_1: tile_1
      touch_reveals_button: submit
    misc: 
      config_iteration: 4
      num_stars: 3
      blank_between_exercises: 500
      remove_on_exit: [button_submit]
      freeze_display: true
  just_dot:
    params:
      event_handling: 
        target: tile_2
        move: move_dot
  with_handle:
    params:
      create:
        door_2: [1]
        door_1: [1]
      modify:
        door_1:
          position: [60vw, 0]
          misc:
            extra_scale: tile_1_height
        door_2:
          position: [right 50, 0]
          misc:
            handle_opacity: 0
            extra_scale: tile_2_height
      event_handling: 
        target: door_2
        move: move_handle_dot
      delay:
        modify:
          door_2:
            anim_info: { blink: 0 }
    with_dot:
      params:
      level_1:
      level_2:
        params:
          delay:
            modify:
              tile_2:
                anim_info: { opacity: [1, 0], duration: 3000 }
      level_3:
        params:
          delay:
            modify:
              tile_2:
                anim_info: { opacity: [1, 0], duration: 500 }
      level_4:
        params:
          modify:
            tile_2:
              anim_info:
                opacity: [1, 0]
                duration: 1000
        door_9: 
    both_animals:
      params:
        misc:
          hide_dot: true
      level_1:
      level_2:
        params:
          modify:
            tile_2:
              anim_info: { opacity: [1, 0], duration: 1000 }
    one_animal:
      params:
        modify:
          tile_2:
            style: {opacity: 0}
        misc:
          hide_dot: true
    just_doors:
      params:
        modify:
          tile_1:
            style: {opacity: 0}
          tile_2:
            style: {opacity: 0}
        misc:
          hide_dot: true
      level_1:
proportion:
  params:
    generate: { portal_1_name: [uniform, .2, .9], 
                door_2_name: [uniform, .1, .9],
                # door_2_name: [fixed, .5],
                door_3_name: portal_1_name * door_2_name,
                restriction_2: door_3_name < door_2_name }
    create:
      portal_1: { name:  [1, portal_1_name] }
      door_2: { name: [door_2_name] }
      door_3: { name: [door_3_name] }
      err_box:
    modify:
      portal_1: { position: [0, 0], misc: {stealth_mode: true} }
      door_2: { position: [220, 0], misc: {handle_color: orange} }
      door_3: 
        position: [320, 0]
        style: { opacity: 1 }
        anim_info: { blink: 0 }
        misc: 
          handle_opacity: 0
          handle_color: orange
          extra_scale: portal_1_name
    event_handling: 
      arg_1: portal_1
      arg_2: door_2
      result: door_3
      correctness: near_height
      top_right_text: average_error
      just_proportion: true
      move: move_handle
      target: door_3
      show_camel: true
      slide_portal: false
      touch_reveals_button: submit
      star_policy: loose
    misc: 
      config_iteration: 4
      num_stars: 3
      remove_on_exit: [err_box]
      blank_between_exercises: 500
  option:
    # skip_node_above:
    params:
      generate:
        # portal_1_name: [fixed, .75]
        # door_2_name: [fixed, .25]
        extra_name: door_2_name / portal_1_name
        option_value_delta: 0.2
        # option_value_delta: 0
        option_value_seed: door_2_name
        # option_value_seed: .5
        restriction_3: option > 0
        restriction_4: option < 1
        restriction_5: option < extra_name
      modify:
        door_3:
          position: [0, 0]
          anim_info: null
          misc: 
            is_option: true
            handle_opacity: null
      event_handling: 
        show_camel: null
    pure_copy:
      params:
        generate: 
          restriction_2: null
          restriction_5: null
        create:
          portal_1: { name:  [portal_1_name, portal_1_name] }
        misc:
          config_iteration: 3
      level_1: { params: { generate: { portal_1_name: [fixed, 1] } } }
      level_2: 
        params: 
          generate: { portal_1_name: [fixed, 1] }
          modify:
            portal_1:
              appear_after: 500
              anim_info: { opacity: [1, 0], delay: 1000, duration: 500 }
            door_2:
              appear_after: 500
              anim_info: { opacity: [1, 0], delay: 1000, duration: 500 }
            door_3:
              appear_after: 1500
      level_3: { params: { generate: { portal_1_name: [fixed, .5] } } }
      level_4: 
        params: 
          generate: { portal_1_name: [fixed, .5] }
          modify:
            portal_1:
              appear_after: 500
              anim_info:
                opacity: [1, 0]
                delay: 1000
                duration: 500
            door_2:
              appear_after: 500
              anim_info:
                opacity: [1, 0]
                delay: 1000
                duration: 500
            door_3:
              appear_after: 1500
      level_5: { params: { generate: { portal_1_name: [fixed, .25] } } }
      level_6: 
        params: 
          generate: { portal_1_name: [fixed, .25] }
          modify:
            portal_1:
              appear_after: 500
              anim_info:
                opacity: [1, 0]
                delay: 1000
                duration: 500
            door_2:
              appear_after: 500
              anim_info:
                opacity: [1, 0]
                delay: 1000
                duration: 500
            door_3:
              appear_after: 1500
    zoom_down:
      params:
        generate: 
          restriction_5: null
      level_1:
        params:
          modify:
            portal_1:
              zoom_anim: 
                source: 1
                target: portal_1_name
                time: [ {delay: 1000, duration: 1000} ]
            door_3:
              appear_after: 3000
          misc: 
            skip_slide_down: true
      level_2:
        params:
          modify:
            portal_1:
              zoom_anim: 
                source: 1
                target: portal_1_name
                time: [ {delay: 1000, duration: 500} ]
            door_3:
              appear_after: 2500
    bounce:
      params:
      level_1:
        params:
          generate: { door_2_name: [fixed, .5] }
          modify:
            portal_1:
              zoom_anim: 
                source: 1
                target: portal_1_name
                time: [ {delay: 1000, duration: 500}, {delay: 2000, duration: 250} ]
            door_3:
              appear_after: 4500
      level_2:
        params:
          generate: { door_2_name: [pick_from_list, [.25, .5, .75]] }
          modify:
            portal_1:
              zoom_anim: 
                source: 1
                target: portal_1_name
                time: [ {delay: 1000, duration: 250}, {delay: 1000, duration: 250} ]
            door_3:
              appear_after: 3500
      level_3:
        params:
          modify:
            portal_1:
              zoom_anim: 
                source: 1
                target: portal_1_name
                time: [ {delay: 1000, duration: 250}, {delay: 500, duration: 500} ]
            door_3:
              appear_after: 3000
    no_bounce:
      params:
        modify:
          door_3:
            appear_after: 1000
      level_1:
        params:
          generate: { door_2_name: [fixed, .5] }
      level_2:
        params:
          generate: { door_2_name: [pick_from_list, [.25, .5, .75]] }
      level_3:
      level_4:
        params:
          generate: 
            restriction_5: null
  # here are the original levels that do not use options
  pure_copy:
    skip_node_above:
    params:
      generate: { restriction_2: null }
      create:
        portal_1: { name:  [portal_1_name, portal_1_name] }
    level_1: { params: { generate: { portal_1_name: [fixed, 1] } } }
    level_2: { params: { generate: { portal_1_name: [fixed, .5] } } }
    level_3: { params: { generate: { portal_1_name: [fixed, .25] } } }
  zoom_down:
    skip_node_above:
    params:
    level_1:
      params:
        modify:
          portal_1:
            zoom_anim: 
              source: 1
              target: portal_1_name
              time: [ {delay: 1000, duration: 1000} ]
          door_3:
            appear_after: 3000
            anim_info: { blink: 0, delay: 3000 }
        misc: 
          skip_slide_down: true
    level_2:
      params:
        modify:
          portal_1:
            zoom_anim: 
              source: 1
              target: portal_1_name
              time: [ {delay: 1000, duration: 500} ]
          door_3:
            appear_after: 2500
            anim_info: { blink: 0, delay: 2500 }
  bounce:
    skip_node_above:
    params:
    level_1:
      params:
        generate: { door_2_name: [fixed, .5] }
        modify:
          portal_1:
            zoom_anim: 
              source: 1
              target: portal_1_name
              time: [ {delay: 1000, duration: 500}, {delay: 2000, duration: 250} ]
          door_3:
            appear_after: 4500
            anim_info: { blink: 0, delay: 4500 }
    level_2:
      params:
        generate: { door_2_name: [pick_from_list, [.25, .5, .75]] }
        modify:
          portal_1:
            zoom_anim: 
              source: 1
              target: portal_1_name
              time: [ {delay: 1000, duration: 250}, {delay: 1000, duration: 250} ]
          door_3:
            appear_after: 3500
            anim_info: { blink: 0, delay: 3500 }
    level_3:
      params:
        modify:
          portal_1:
            zoom_anim: 
              source: 1
              target: portal_1_name
              time: [ {delay: 1000, duration: 250}, {delay: 500, duration: 500} ]
          door_3:
            appear_after: 3000
            anim_info: { blink: 0, delay: 3000 }
  no_bounce:
    params:
      modify:
        door_3:
          appear_after: 1000
          anim_info: { blink: 0, delay: 1000 }
    level_1:
      params:
        generate: { door_2_name: [fixed, .5] }
    level_2:
      params:
        generate: { door_2_name: [pick_from_list, [.25, .5, .75]] }
    level_3:
    level_4:
multiply_height:
  params:
    generate: { portal_1_name: [uniform, .1, .9], 
                door_3_name: [uniform, .1, .9], }
    create:
      door_3: { name: [door_3_name] }
      # door_3: [0.29]
      # portal_1: { name: [1] }
      portal_1: [1.]
      # tower_1: { name: [.5, .3] }
      # button_submit:
    modify:
      portal_1: { position: [0, 0], anim_info: { handle_blink: 0 } }
      door_3: { position: [320, 0], misc: {handle_color: orange} }
      # tower_1: { position: [50vw, 0] }
    event_handling: 
      arg_1: portal_1
      result: door_3
      correctness: near_height
      top_right_text: average_error
      slide_portal: true
    misc: 
      config_iteration: 2
      num_stars: 3
      remove_on_exit: [err_box]
      blank_between_exercises: 500
  animal_target:
    params:
      generate: { tile_2_name: [pick_animal_name],
                  restriction_1: tile_2_name < 1.0,
                  restriction_2: door_3_name < tile_2_name }
      create:
        # tile_2: { name: "puppy" }
        tile_2: { name: tile_2_name }
      modify:
        tile_2: { position: [right_from_left 280, 0] }
      event_handling: 
        arg_2: tile_2
        target: portal_1
    touch_image:
      params:
        modify:
          portal_1: { position: [0, 0], anim_info: null }
          tile_2:
            anim_info: { blink: .5 }
        event_handling: 
          move: touch_image
          star_policy: extraLoose 
    move_handle:
      params:
        event_handling: 
          move: move_handle
          star_policy: loose 
  door_target:
    params:
      generate: { door_2_name: [uniform, .1, .9],
                  door_3_name: portal_1_name * door_2_name,
                  restriction_2: door_3_name < door_2_name }
      create:
        door_2: { name: [door_2_name] }
        # door_2: [.5]
      modify:
        door_2: { position: [220, 0], misc: {handle_color: orange} }
      event_handling: { arg_2: door_2, move: move_handle }
    move_portal_handle_to_match:
      params:
        event_handling: 
          target: portal_1
          star_policy: moderate 
    move_portal_handle_to_shadow:
      params:
        create:
          portal_1: { name: [1, portal_1_name] }
          button_submit: remove
        modify:
          door_3: { style: {opacity: 0} }
        event_handling: 
          target: portal_1
          star_policy: strict
      level_1:
      levels_with_stages:
        params:
          misc: 
            config_iteration: null
            problem_stage: true
            skip_submit: true
            skip_in_between: true
        level_2a:
        level_2b:
          params:
            modify:
              portal_1: { anim_info: null }
              door_3: 
                style: {opacity: 1}
                anim_info: { blink: 0 }
                misc: 
                  handle_opacity: 0
            event_handling: 
              target: door_3
            misc: 
              skip_submit: null
              skip_in_between: null
              problem_stage: null
              goto_config: [2, ['multiply_height', 'door_target',
                'move_portal_handle_to_shadow', 'levels_with_stages', 'level_2a']]
              remove_on_exit: [err_box, button_submit]
        level_3a:
          params:
            event_handling: 
              return_to_top: portal_1
        level_3b:
          params:
            create:
              err_box:
              button_submit:
            modify:
              portal_1: { anim_info: null }
              door_3: 
                style: {opacity: 1}
                anim_info: { blink: 0 }
                misc: 
                  handle_opacity: 0
            event_handling: 
              target: door_3
              show_camel: true
              slide_portal: false
            misc: 
              skip_submit: null
              skip_in_between: null
              problem_stage: null
              goto_config: [2, ['multiply_height', 'door_target',
                'move_portal_handle_to_shadow', 'levels_with_stages', 'level_3a']]
              remove_on_exit: [err_box, button_submit]
    actual_multiplication:
      params:
        create:
          portal_1: { name:  [1, portal_1_name] }
          err_box:
        modify:
          portal_1: { anim_info: null }
          door_3: 
            style: {opacity: 1}
            anim_info: { blink: 0 }
            misc: 
              handle_opacity: 0
              handle_color: orange
        event_handling: 
          target: door_3
          show_camel: true
          slide_portal: false
          touch_reveals_button: submit
          star_policy: loose
      level_1:
        params:
          generate: { door_2_name: [fixed, .5] }
      level_2:
all_done:
  params:
    create:
      center_text:  That's all for today!
# bar_addition:
# - params:
#   - generator: {random1: uniform, random2: uniform, sum_in_range: [.1,1]}
#   - event_handling: {down: jump_if_far, move: by_delta, submit: error_animation }
#   - misc: {num_exercises: 4}
#   - create:
#     - expr1:
#       - params: {op: +, left: 35}
#       - bar1: {value: random1}
#       - bar2: {value: random2}
#       - door1:
#         - params: {-locked, +knob_hidden, +is_target}
#     - button_submit: []
#   - modify: []
# - replicate_close_tile_height:
#   - params: {}
# - replicate_far_tile_height: []
# - replicate_far_tile_height:
#   - params: {maxNumExercises: 3}
#   - ex1:
#     - params: {+size11x17, +justStandardize}
#   - ex2:
#     - params: {+size8p5x11, +rebuildTower, +removeBorders}
# choose_tower_name:
# pack_unpack:
# standardize:
# estimate_sums:
# single_size_addition:
# multi_size_addition_1:
# multi_size_addition_2:
# decimal_frame:
# decimal_number:
# suuji_multiplication:
# estimating_products:
# multi_digit_addition:
# multi_digit_subtraction:
# shrinking_a_tower:
# multi_size_multiplication:
# decimal_to_shrink:
# multi_digit_multiplication:
suffix1:
  params:
    modify:
      door_1: 
        misc: {tickmarks: null}
in_between:
  params:
    create:
      button_next:
animation_test:
  params:
    create:
      tile_1: kitty
    modify:
      tile_1:
        position: [10, 0]
        anim_info:
          left: [10, 400]
          delay: 500
          duration: 2000
    event_handling: 
      just_jump: true
